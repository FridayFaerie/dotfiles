# NOTE: MONITORS
# monitor = DP-1,preferred,auto-up,1,transform,1
monitor = DP-1,preferred,auto-up,1.5
monitor = eDP-1,preferred,auto-down,1.5
# monitor = eDP-1, disable
# monitor = ,preferred,auto,1


# NOTE: STARTUP THINGS
exec-once = hyprpm reload -n
exec-once = bash ~/.config/hypr/start.sh
# exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/libhyprexpo.so"
# exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/libhyprfocus.so"
# exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/libhyprscrolling.so"
# exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/libhypr-dynamic-cursors.so"
# # exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/libhyprgreen.so"
# exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/libHypr-DarkWindow.so"

env = QT_QPA_PLATFORMTHEME,qt6ct


# NOTE: DEFINITIONS
$mainMod        = ALT
$menu           = rofi -show drun -show-icons
$terminal       = foot
$fileManager    = $terminal yazi
$browser        = firefox

# NOTE: BINDINGS
# l:locked	        Will also work when an input inhibitor (e.g. a lockscreen) is active.
# r:release	        Will trigger on release of a key.
# c:click	        Will trigger on release of a key or button as long as the mouse cursor stays inside binds:drag_threshold.
# g:drag	        Will trigger on release of a key or button as long as the mouse cursor moves outside binds:drag_threshold.
# o:long press	    Will trigger on long press of a key.
# e:repeat	        Will repeat when held.
# n:non-consuming	Key/mouse events will be passed to the active window in addition to triggering the dispatcher.
# m:mouse	        See the dedicated Mouse Binds section.
# t:transparent	    Cannot be shadowed by other binds.
# i:ignore mods	    Will ignore modifiers.
# s:separate	    Will arbitrarily combine keys between each mod/key, see Keysym combos.
# d:description	    Will allow you to write a description for your bind.
# p:bypass	        Bypasses the appâ€™s requests to inhibit keybinds.


# NOTE: bindings for things that pop up
bind = $mainMod, T,     exec, $terminal
bind = $mainMod, R,     exec, $menu
bind = $mainMod, B,     exec, $browser
# bind = $mainMod, F,     exec, $fileManager
bind=$SUPER_SHIFT, W, exec, wlogout -p layer-shell 
bind = Control_L&Shift_L, PRINT, exec,  hyprshot -m active -m output -o ~/Pictures
bind = SHIFT, PRINT, exec,              hyprshot -z -m window -o ~/Pictures
bind = , PRINT, exec,                   hyprshot -z -m region -o ~/Pictures

# NOTE: feldspar things
bind = $mainMod, SPACE, global, feldspar:expandGap

bind = $mainMod, M,     exit,
bind = $mainMod, P,     pseudo, # dwindle
bind = $mainMod, W,     togglesplit, # dwindle
bind = $mainMod, V,     togglefloating,

bind = $mainMod, `,     killactive,
bind = $mainMod SHIFT,  `, forcekillactive,

bind = $mainMod, C,     fullscreen, 1
bind = $mainMod, F,     fullscreen, 0
# bind = $mainMod, E,     fullscreenstate, 0 3

bind = $mainMod, S,     togglespecialworkspace, magic
bind = $mainMod SHIFT, S, movetoworkspace, special:magic
bind = $mainMod, mouse_down, workspace, e-1
bind = $mainMod, mouse_up, workspace, e+1
bind = $mainMod, 0, workspace, 10
bind = $mainMod, code:10, workspace, 1
bind = $mainMod, code:11, workspace, 2
bind = $mainMod, code:12, workspace, 3
bind = $mainMod, code:13, workspace, 4
bind = $mainMod, code:14, workspace, 5
bind = $mainMod, code:15, workspace, 6
bind = $mainMod, code:16, workspace, 7
bind = $mainMod, code:17, workspace, 8
bind = $mainMod, code:18, workspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10
bind = $mainMod SHIFT, code:10, movetoworkspace, 1
bind = $mainMod SHIFT, code:11, movetoworkspace, 2
bind = $mainMod SHIFT, code:12, movetoworkspace, 3
bind = $mainMod SHIFT, code:13, movetoworkspace, 4
bind = $mainMod SHIFT, code:14, movetoworkspace, 5
bind = $mainMod SHIFT, code:15, movetoworkspace, 6
bind = $mainMod SHIFT, code:16, movetoworkspace, 7
bind = $mainMod SHIFT, code:17, movetoworkspace, 8
bind = $mainMod SHIFT, code:18, movetoworkspace, 9
# bind=$mainMod, H, movefocus, l
# bind=$mainMod, L, movefocus, r
# bind=$mainMod, K, movefocus, u
# bind=$mainMod, J, movefocus, d

binde=,XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
binde=,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
binde=,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
binde=,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

bindel=,XF86MonBrightnessUp, exec, brightnessctl s 10%+
bindel=,XF86MonBrightnessDown, exec, brightnessctl s 10%-

bindl=, XF86AudioNext, exec, playerctl next
bindl=, XF86AudioPause, exec, playerctl play-pause
bindl=, XF86AudioPlay, exec, playerctl play-pause
bindl=, XF86AudioPrev, exec, playerctl previous

bindm=$mainMod, mouse:272, movewindow
bindm=$mainMod, mouse:273, resizewindow

windowrule=suppressevent maximize, class:.*
windowrule=nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0
# TODO: what's this now
# windowrule=fullscreenstate:0 3, title:(Typst Preview)(.*)



bind = $mainMod SHIFT, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 + 3}')
bind = $mainMod SHIFT, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 - 3}')

# NOTE: plugins
# bind= SUPER, grave, hyprexpo:expo, toggle
# bind = $mainMod, U, greenactivewindow
# bind = $mainMod, U, invertactivewindow

#hyprscrolling binds
binde = $mainMod, j, workspace, r+1
binde = $mainMod, k, workspace, r-1
binde = $mainMod, h, layoutmsg, move -col 
binde = $mainMod, l, layoutmsg, move +col

binde = $mainMod, equal, layoutmsg, colresize +0.1
binde = $mainMod, minus, layoutmsg, colresize -0.1
bind  = $mainMod, i, layoutmsg, colresize +conf

binde = $mainMod shift, h, layoutmsg, swapcol l
binde = $mainMod shift, l, layoutmsg, swapcol r




general {
  gaps_in=5
  gaps_out=5

  border_size=0
  resize_on_border=true

  allow_tearing=false

  layout = scrolling
}


dwindle {
  pseudotile = true
  preserve_split = true
}

input {
  touchpad {
    natural_scroll = true
  }
  follow_mouse = 1
  kb_layout = us
  kb_options = ctrl:nocaps, compose:ralt
  sensitivity = 0
}

misc {
  force_default_wallpaper = false
  disable_hyprland_logo = true
  focus_on_activate = true
}

xwayland {
  force_zero_scaling=true
}

# gestures:workspace_swipe = true

animations {
  enabled = true

  bezier = fluent_decel, 0.1, 1, 0, 1
  bezier = md3_decel, 0.05, 0.7, 0.1, 1
  bezier = bounce,1,1.6,0.1,0.85

  animation = windows, 1, 4, md3_decel, slide
  animation = workspaces, 1, 4, fluent_decel, slidevert
  animation = layers, 1, 1, md3_decel, popin 80%
  animation = layersOut, 1, 100, fluent_decel, slidevert
  animation = layersIn, 0, 1, fluent_decel, slidevert
  animation = fade, 1, 2, md3_decel
  animation = specialWorkspace, 1, 4, fluent_decel, slidevert
  animation = global, 0
  # animation = hyprfocusIn, 1, 4, fluent_decel
  # animation = hyprfocusOut, 1, 4, fluent_decel
}

decoration {
  blur {
    enabled=false
    passes=1
    size=3
    vibrancy=0.169600
  }

  shadow {
    enabled=true
    color=rgba(1a1a1aee)
    range=4
    render_power=2
  }
  active_opacity=1.000000
  inactive_opacity=0.950000
  rounding=10
}

windowrule=fullscreen, class:mpv

windowrule=noborder, class:foot
windowrule=noshadow, class:foot
layerrule = noanim, hyprpicker
layerrule = noanim, selection
layerrule = noanim, quickshell:screenshot

# debug:disable_logs=false
# debug:suppress_errors=true


plugin {
  dynamic-cursors {
    hyprcursor {
      enabled=true
      fallback=clientside
      nearest=true
      resolution=-1
    }

    rotate {
      length=20
      offset=0.000000
    }

    shake {
      enabled=false
      base=4.000000
      effects=false
      influence=0.000000
      ipc=false
      limit=0.000000
      nearest=true
      speed=4.000000
      threshold=6.000000
      timeout=2000
    }

    stretch {
      function=quadratic
      limit=3000
    }

    tilt {
      function=negative_quadratic
      limit=5000
    }
    enabled=true
    mode=rotate
    threshold=2
  }

  hyprexpo {
      columns = 2
      gap_size = 0
      bg_col = rgb(111111)
      workspace_method = first 1 # [center/first] [workspace] e.g. first 1 or center m+1

      enable_gesture = true # laptop touchpad
      gesture_fingers = 3  # 3 or 4
      gesture_distance = 300 # how far is the "max"
      gesture_positive = no # positive = swipe down. Negative = swipe up.
  }

  hyprscrolling {
    fullscreen_on_one_column = true
    column_width = 0.5
    explicit_column_widths = 0.5, 1.0
    focus_fit_method = 1
    follow_focus = false
  }

  hyprfocus {
    mode = slide
    slide_height = 0
  }


  # hyprgreen {
  #   color = rgba(00ff00ff)
  # }

  imgborders {
    enabled = true
    image = ~/Downloads/border.png
    sizes = 7,4,3,4 # left, right, top, bottom
    # insets = 0,0,0,0 # left, right, top, bottom
    scale = 4
    smooth = true
    blur = false
  }

}

# ecosystem:enforce_permissions = true

# source=~/.config/wallust/themes/hypr.conf
